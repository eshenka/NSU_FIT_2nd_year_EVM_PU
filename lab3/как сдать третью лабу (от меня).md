# Как сдать третью лабу?

Нужно разобраться.

Есть регистровая и оперативная память.
Как правило в %esp лежит вершина стека. Стек растет в сторону уменьшения адреса, то есть если есть команда `subl $32, %esp`, которая по суди вычитает из адреса в `%esp` 32, увеличивает наш стек. Во время, например, команды `popl` происходит то же самое, стек увеличиавется, а `esp` уменьшается на 4 байта (4, потому что суффикс `l`, в x86-64 обычно стоит q, что соответсвует 8-ми байтам).

По командам `-Ofast` особо не спрашивали.
Сопоставить `-O0` и Сишный код достаточно легко, если гуглить все команды и пользоваться помощью подстветки сайта [godbolt](https://godbolt.org/). У каждого получится достаточно индивидуальный код, поэтому если что-то не понимаешь, лучше спросить преподавателя, после беседы на 10 минут с которым, вы, возможно, поймете более важные и базовые вещи, чем могли прочитать в интернете.

С командами помог сайт [http://www.club155.ru/programming](http://www.club155.ru/programming) и [https://av-assembler.ru/](https://av-assembler.ru/).

_Обязательно убедитесь, что знаете разницу между регистрами и оперативной памятью._

### Любимые вопросы преподавателя:
-что делает push?
-где инкремент цикла?
-где тело цикла? (тело цикла, как правило, заканчивается одной из вариаций `jump`, а начинается меткой типа `.L3` (в моем листинге `-m32 -O0`)
-в какой строке есть обращение в память? (обычно оно происходит, когда встречается что-то вроде `n(%xxx)`, где n любое число, а `%xxx` любой регистр.

Важно понять, что любые арифметические операции и операции сравнения изменяют флаги, а такие команды как вариации `jump` и `cmov` имеют флаги входными операндами.

Хорошим вопросом было: "Испортим ли мы навсегда значение, которое лежит в `epb`?" Вообще, нет. Всегда будет либо `popl epb`, либо `leave`, которая делает неявный `pop` в `ebp`.

Если отвечать уверенно и знать, что делают базовые команды, можно избежать сложных вопросов и легко сдать лабу. Если начинают спрашивать по всему листингу, отчаиваться сильно не нужно. Нам разрешали прямо на сдаче смотреть, что делает каждая функция.